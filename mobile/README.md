# äº•æ³¢ãƒãƒƒãƒ—ã‚¢ãƒ—ãƒª Mobile (V4.1)

Flutter cross-platform mobile application for the InamiMapApp project - å¯Œå±±çœŒå—ç ºå¸‚äº•æ³¢ã®è¡—æ­©ãæ”¯æ´ã‚¢ãƒ—ãƒª

## æ¦‚è¦

äº•æ³¢ãƒãƒƒãƒ—ã‚¢ãƒ—ãƒªã¯ã€å¯Œå±±çœŒå—ç ºå¸‚äº•æ³¢ã®ã€Œå€‹äººåº—èˆ—ã€ã€Œã‚¤ãƒ™ãƒ³ãƒˆã€ã€Œå…¬å…±æ–½è¨­ã€ã‚’ç™ºè¦‹ã—ã€**å¤–ã‹ã‚‰æ¥ãŸäººãŒäº•æ³¢ã‚’å ªèƒ½ã™ã‚‹ãŸã‚ã®è¡—æ­©ãæ”¯æ´ã‚¢ãƒ—ãƒª**ã§ã™ã€‚

## V4.1 æ–°æ©Ÿèƒ½

### ğŸ†• åº—èˆ—æä¾›ã‚µãƒ¼ãƒ“ã‚¹è¡¨ç¤º
- 17ç¨®é¡ã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ»è¨­å‚™æƒ…å ±ã‚’ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã§è¡¨ç¤º
- ãƒˆã‚¤ãƒ¬ã€Wi-Fiã€ãƒšãƒƒãƒˆå¯ã€é§è»Šå ´ãªã©ã€åˆ©ç”¨è€…ãŒçŸ¥ã‚ŠãŸã„æƒ…å ±ã‚’äº‹å‰ç¢ºèªå¯èƒ½
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§ã‚µãƒ¼ãƒ“ã‚¹Chipã¨ã—ã¦è¡¨ç¤º

### ğŸ†• è‡¨æ™‚å–¶æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
- å½“æ—¥ã®çŸ­ç¸®å–¶æ¥­ãƒ»è‡¨æ™‚ä¼‘æ¥­çŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- æœŸé–“æŒ‡å®šã§ã®å–¶æ¥­å¤‰æ›´ã«å¯¾å¿œ
- åº—ä¸»ã‹ã‚‰ã®é¡§å®¢å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

### ğŸ†• æ‹¡å¼µã•ã‚ŒãŸåº—èˆ—æƒ…å ±
- ã“ã ã‚ã‚Šãƒã‚¤ãƒ³ãƒˆã®è¡¨ç¤º
- é€£çµ¡å…ˆæƒ…å ±ï¼ˆé›»è©±ã€ãƒ¡ãƒ¼ãƒ«ï¼‰
- è©³ç´°å–¶æ¥­æ™‚é–“ãƒ»å®šä¼‘æ—¥æƒ…å ±
- æ‰¿èªæ¸ˆã¿åº—èˆ—ã®ã¿è¡¨ç¤ºï¼ˆå“è³ªç®¡ç†ï¼‰

## ä¸»è¦æ©Ÿèƒ½

### èªè¨¼æ©Ÿèƒ½
- Googleèªè¨¼ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- æ‰¿èªæ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

### ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
- åº—èˆ—ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã®ãŠæ°—ã«å…¥ã‚Šç™»éŒ²
- ãŠæ°—ã«å…¥ã‚Šä¸€è¦§è¡¨ç¤ºãƒ»ç®¡ç†
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ

### åœ°å›³è¡¨ç¤º
- Google Maps SDKçµ±åˆ
- æ‰¿èªæ¸ˆã¿åº—èˆ—ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã®è¡¨ç¤º
- è©³ç´°æƒ…å ±è¡¨ç¤º

### åº—èˆ—ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆé–²è¦§
- ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- æ¤œç´¢æ©Ÿèƒ½
- è©³ç´°æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Core Framework
- **Flutter**: 3.0.0ä»¥ä¸Š
- **Firebase**: BaaSï¼ˆèªè¨¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
- **Google Maps Flutter**: åœ°å›³æ©Ÿèƒ½
- **Provider**: çŠ¶æ…‹ç®¡ç†

### UI/UX
- **Material Design**: Googleãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æº–æ‹ 
- **Cached Network Image**: ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–
- **Cupertino Icons**: iOSé¢¨ã‚¢ã‚¤ã‚³ãƒ³

### Firebase Services
- **Firebase Auth**: Googleèªè¨¼
- **Cloud Firestore**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Firebase Storage**: ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- **Google Sign-In**: èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Flutter SDK 3.0.0ä»¥ä¸Š
- Android Studio / Xcode
- Androidç«¯æœ«/ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ ã¾ãŸã¯ iOSç«¯æœ«/ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
- Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. **ä¾å­˜é–¢ä¿‚ã®å–å¾—:**
   ```bash
   flutter pub get
   ```

2. **Firebaseè¨­å®š:**
   - `firebase_options.dart` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«é…ç½®
   - Android: `google-services.json`
   - iOS: `GoogleService-Info.plist`

3. **å®Ÿè¡Œ:**
   ```bash
   flutter run
   ```

## åˆ©ç”¨å¯èƒ½ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™º
flutter pub get          # ä¾å­˜é–¢ä¿‚å–å¾—
flutter run              # ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ
flutter run --release    # ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã§å®Ÿè¡Œ

# ãƒ“ãƒ«ãƒ‰
flutter build apk         # Android APK
flutter build appbundle   # Android App Bundle
flutter build ios         # iOS ã‚¢ãƒ—ãƒª

# å“è³ªç®¡ç†
flutter test              # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
flutter analyze           # é™çš„è§£æ
flutter format .          # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
lib/
â”œâ”€â”€ models/               # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ shop_model.dart   # åº—èˆ—ãƒ¢ãƒ‡ãƒ«ï¼ˆV4.1æ›´æ–°ï¼‰
â”‚   â”œâ”€â”€ event_model.dart  # ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ user_model.dart   # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ favorite_model.dart # ãŠæ°—ã«å…¥ã‚Šãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ screens/              # ç”»é¢
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ shop_list_screen.dart # åº—èˆ—ä¸€è¦§ï¼ˆV4.1æ›´æ–°ï¼‰
â”‚   â”œâ”€â”€ event_list_screen.dart
â”‚   â”œâ”€â”€ favorite_screen.dart
â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”œâ”€â”€ map_screen.dart
â”‚   â””â”€â”€ profile_screen.dart
â”œâ”€â”€ widgets/              # å†åˆ©ç”¨å¯èƒ½ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚   â”œâ”€â”€ favorite_button.dart
â”‚   â”œâ”€â”€ shop_services_widget.dart      # NEW: ã‚µãƒ¼ãƒ“ã‚¹è¡¨ç¤º
â”‚   â””â”€â”€ temporary_status_widget.dart   # NEW: è‡¨æ™‚å–¶æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
â”œâ”€â”€ providers/            # çŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”œâ”€â”€ favorite_provider.dart
â”‚   â”œâ”€â”€ location_provider.dart
â”‚   â””â”€â”€ map_data_provider.dart
â”œâ”€â”€ services/             # å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ api_service.dart
â”‚   â”œâ”€â”€ auth_service.dart
â”‚   â””â”€â”€ favorite_service.dart
â”œâ”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ service_icons.dart # NEW: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚¤ã‚³ãƒ³å®šç¾©
â”œâ”€â”€ firebase_options.dart # Firebaseè¨­å®š
â””â”€â”€ main.dart             # ã‚¢ãƒ—ãƒªã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```

## V4.1 æ–°æ©Ÿèƒ½è©³ç´°

### æä¾›ã‚µãƒ¼ãƒ“ã‚¹è¡¨ç¤º (`ShopServicesWidget`)

```dart
// ä½¿ç”¨ä¾‹
ShopServicesWidget(
  services: shop.services,
  maxVisible: 4,  // æœ€å¤§è¡¨ç¤ºæ•°
)
```

**å¯¾å¿œã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§:**
ğŸš» ãƒˆã‚¤ãƒ¬ | ğŸ”Œ å……é›» | ğŸ• ãƒšãƒƒãƒˆå¯ | ğŸš¬ å–«ç…™æ‰€ | ğŸ‘¶ ãŠã‚€ã¤å° | ğŸ“¶ Wi-Fi | ğŸ’³ ã‚«ãƒ¼ãƒ‰ | ğŸ“± é›»å­ãƒãƒãƒ¼ | â™¿ ãƒãƒªã‚¢ãƒ•ãƒªãƒ¼ | ğŸ…¿ï¸ é§è»Šå ´ | ğŸš² è‡ªè»¢è»Š | ğŸ¥¡ ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ | ğŸšš é…é” | ğŸ“… äºˆç´„å¯ | ğŸ›’ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ³¨æ–‡ | ğŸŒ å¤šè¨€èª | â­ ãã®ä»–

### è‡¨æ™‚å–¶æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ (`TemporaryStatusWidget`)

```dart
// ä½¿ç”¨ä¾‹
TemporaryStatusWidget(
  temporaryStatus: shop.temporaryStatus,
)
```

- **å½“æ—¥åˆ¤å®š**: è‡ªå‹•çš„ã«ä»Šæ—¥ãŒå¯¾è±¡æœŸé–“ã‹ãƒã‚§ãƒƒã‚¯
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º**: è‡¨æ™‚ä¼‘æ¥­ãƒ»æ™‚çŸ­å–¶æ¥­ã®æ˜ç¢ºãªè¡¨ç¤º
- **æœŸé–“è¡¨ç¤º**: é–‹å§‹æ—¥ã€œçµ‚äº†æ—¥ã®è¡¨ç¤º
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: åº—ä¸»ã‹ã‚‰ã®é¡§å®¢å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ›´æ–°

**ShopModel (V4.1):**
```dart
class ShopModel {
  // åŸºæœ¬æƒ…å ±
  final String shopName;
  final String description;
  final String maniacPoint;        // NEW: ã“ã ã‚ã‚Šãƒã‚¤ãƒ³ãƒˆ
  
  // å–¶æ¥­æƒ…å ±
  final String? phone;             // NEW: é›»è©±ç•ªå·
  final String? email;             // NEW: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  final String? closedDays;        // NEW: å®šä¼‘æ—¥æƒ…å ±
  final WeeklyBusinessHours? businessHours;  // NEW: è©³ç´°å–¶æ¥­æ™‚é–“
  
  // ã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±
  final List<String>? services;    // NEW: æä¾›ã‚µãƒ¼ãƒ“ã‚¹
  final TemporaryStatus? temporaryStatus;  // NEW: è‡¨æ™‚å–¶æ¥­å¤‰æ›´
  
  // æ‰¿èªç®¡ç†
  final String approvalStatus;     // æ‰¿èªçŠ¶æ…‹ç®¡ç†
}
```

## Firebase ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«

æ‰¿èªæ¸ˆã¿åº—èˆ—ã®ã¿ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§è¡¨ç¤º:

```javascript
// Firestore Rules (shops collection)
match /shops/{shopId} {
  allow read: if resource.data.approvalStatus == 'approved';
}
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Android

```bash
# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
flutter build appbundle --release

# Play Storeã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™
# build/app/outputs/bundle/release/app-release.aab
```

### iOS

```bash
# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰  
flutter build ios --release

# App Store Connect ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
# ios/Runner.xcworkspace ã‚’Xcodeã§é–‹ãArchive
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### Android (`android/app/build.gradle`)
```gradle
android {
    compileSdkVersion 34
    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 34
        versionCode 2
        versionName "4.1.0"
    }
}
```

### iOS (`ios/Runner/Info.plist`)
```xml
<key>CFBundleVersion</key>
<string>2</string>
<key>CFBundleShortVersionString</key>
<string>4.1.0</string>
```

## çŠ¶æ…‹ç®¡ç†

Provider ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨:
- `AuthProvider`: èªè¨¼çŠ¶æ…‹ç®¡ç†
- `FavoriteProvider`: ãŠæ°—ã«å…¥ã‚Šç®¡ç†
- `LocationProvider`: GPSä½ç½®æƒ…å ±
- `MapDataProvider`: ãƒãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†

## API çµ±åˆ

- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: Firebase Cloud Firestore
- **èªè¨¼**: Firebase Authentication
- **ç”»åƒ**: Firebase Storage
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: Firestore Snapshot Listeners
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ¥ç¶šå¤±æ•—æ™‚ã®é©åˆ‡ãªè¡¨ç¤º

## å“è³ªç®¡ç†

- **é™çš„è§£æ**: `flutter analyze`
- **ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: `flutter format`
- **ãƒ†ã‚¹ãƒˆ**: `flutter test` (å°†æ¥è¿½åŠ äºˆå®š)
- **æ‰¿èªãƒ•ãƒ­ãƒ¼**: ç®¡ç†è€…æ‰¿èªæ¸ˆã¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿è¡¨ç¤º

## ãƒªãƒªãƒ¼ã‚¹å±¥æ­´

- **V4.1.0** (2025/11/17): æä¾›ã‚µãƒ¼ãƒ“ã‚¹æ©Ÿèƒ½ã€è‡¨æ™‚å–¶æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¿½åŠ 
- **V4.0.0**: åŸºæœ¬æ©Ÿèƒ½å®Ÿè£…ï¼ˆåº—èˆ—ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆè¡¨ç¤ºã€ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ï¼‰

---

**é–‹ç™ºè€…**: Claude Code + 85-Store  
**ãŠå•ã„åˆã‚ã›**: X (æ—§Twitter) @85store  
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: MIT License (äºˆå®š)